<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark" data-controller="navbar">
  <div class="container-fluid">
    <%= link_to "Butomation", root_path, class: "navbar-brand" %>
    <button class="navbar-toggler p-0 border-0" type="button" id="navbarSideCollapse" data-action="click->navbar#toggle" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-collapse offcanvas-collapse" data-navbar-target="collapse" id="navbarsExampleDefault">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <%= link_to "控制台", root_path, aria: { current: "page" }, class: "nav-link" %>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">虚拟用户</a>
          <ul class="dropdown-menu">
            <li><%= link_to "虚拟用户一览", virtual_users_path, class: "dropdown-item" %></li>
            <% if Current.user&.can_manage_virtual_users? %>
              <li><%= link_to "自动新建", new_virtual_user_path, class: "dropdown-item" %></li>
            <% end %>
            <li><hr class="dropdown-divider"></li>
            <li>
              <%= link_to "Pokermon", sites_pokermons_path, class: "dropdown-item" %>
            </li>
            <li><a class="dropdown-item" href="#">Apple jp</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <%= link_to "抽签计划", lotteries_path, class: "nav-link" %>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">统计报表</a>
        </li>
        <% if Current.user&.can_view_users? %>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">管理</a>
            <ul class="dropdown-menu">
              <li><%= link_to "用户管理", users_path, class: "dropdown-item" %></li>
              <% if Current.user&.can_manage_system? %>
                <li><a class="dropdown-item" href="#">系统设置</a></li>
              <% end %>
            </ul>
          </li>
        <% end %>
      </ul>
      <!--
      <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
      -->
      <div class="d-flex align-items-center">
        <% if Current.user %>
          <span class="navbar-text me-3">
            <small class="text-light">
              <%= Current.user.role_text %> | <%= Current.user.email_address %>
            </small>
          </span>
          <%= button_to "退出", session_path, method: :delete, class: "btn btn-outline-light" %>
        <% end %>
      </div>
    </div>
  </div>
</nav>